(function(){"use strict";let zr="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Qt=(e=21)=>{let t="",n=e;for(;n--;)t+=zr[Math.random()*64|0];return t};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A=function(){return A=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},A.apply(this,arguments)};function Xt(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var B=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,j=Object.keys,$=Array.isArray;typeof Promise!="undefined"&&!B.Promise&&(B.Promise=Promise);function ee(e,t){return typeof t!="object"||j(t).forEach(function(n){e[n]=t[n]}),e}var Ge=Object.getPrototypeOf,$r={}.hasOwnProperty;function ae(e,t){return $r.call(e,t)}function Be(e,t){typeof t=="function"&&(t=t(Ge(e))),(typeof Reflect=="undefined"?j:Reflect.ownKeys)(t).forEach(function(n){he(e,n,t[n])})}var qn=Object.defineProperty;function he(e,t,n,r){qn(e,t,ee(n&&ae(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Fe(e){return{from:function(t){return e.prototype=Object.create(t.prototype),he(e.prototype,"constructor",e),{extend:Be.bind(null,e.prototype)}}}}var Jr=Object.getOwnPropertyDescriptor;function Gt(e,t){var n=Jr(e,t),r;return n||(r=Ge(e))&&Gt(r,t)}var Zr=[].slice;function yt(e,t,n){return Zr.call(e,t,n)}function Hn(e,t){return t(e)}function Ve(e){if(!e)throw new Error("Assertion Failed")}function jn(e){B.setImmediate?setImmediate(e):setTimeout(e,0)}function Qn(e,t){return e.reduce(function(n,r,a){var i=t(r,a);return i&&(n[i[0]]=i[1]),n},{})}function ea(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function ve(e,t){if(ae(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,a=t.length;r<a;++r){var i=ve(e,t[r]);n.push(i)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u===void 0?void 0:ve(u,t.substr(o+1))}}function oe(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Ve(typeof n!="string"&&"length"in n);for(var r=0,a=t.length;r<a;++r)oe(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var o=t.substr(0,i),u=t.substr(i+1);if(u==="")n===void 0?$(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var s=e[o];s||(s=e[o]={}),oe(s,u,n)}}else n===void 0?$(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ta(e,t){typeof t=="string"?oe(e,t,void 0):"length"in t&&[].map.call(t,function(n){oe(e,n,void 0)})}function Xn(e){var t={};for(var n in e)ae(e,n)&&(t[n]=e[n]);return t}var na=[].concat;function Gn(e){return na.apply([],e)}var Vn="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Gn([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return B[e]}),ra=Vn.map(function(e){return B[e]});Qn(Vn,function(e){return[e,!0]});var be=null;function ze(e){be=typeof WeakMap!="undefined"&&new WeakMap;var t=Vt(e);return be=null,t}function Vt(e){if(!e||typeof e!="object")return e;var t=be&&be.get(e);if(t)return t;if($(e)){t=[],be&&be.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Vt(e[n]))}else if(ra.indexOf(e.constructor)>=0)t=e;else{var a=Ge(e);t=a===Object.prototype?{}:Object.create(a),be&&be.set(e,t);for(var i in e)ae(e,i)&&(t[i]=Vt(e[i]))}return t}var aa={}.toString;function zt(e){return aa.call(e).slice(8,-1)}var $t=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",ia=typeof $t=="symbol"?function(e){var t;return e!=null&&(t=e[$t])&&t.apply(e)}:function(){return null},Ne={};function pe(e){var t,n,r,a;if(arguments.length===1){if($(e))return e.slice();if(this===Ne&&typeof e=="string")return[e];if(a=ia(e)){for(n=[];r=a.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Jt=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},se=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zn(e,t){se=e,$n=t}var $n=function(){return!0},oa=!new Error("").stack;function ke(){if(oa)try{throw ke.arguments,new Error}catch(e){return e}return new Error}function Zt(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter($n).map(function(r){return`
`+r}).join("")):""}var ua=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Jn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],en=ua.concat(Jn),sa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ye(e,t){this._e=ke(),this.name=e,this.message=t}Fe(Ye).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Zt(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Zn(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function mt(e,t,n,r){this._e=ke(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Zn(e,t)}Fe(mt).from(Ye);function $e(e,t){this._e=ke(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Zn(e,t)}Fe($e).from(Ye);var ca=en.reduce(function(e,t){return e[t]=t+"Error",e},{}),la=Ye,k=en.reduce(function(e,t){var n=t+"Error";function r(a,i){this._e=ke(),this.name=n,a?typeof a=="string"?(this.message=""+a+(i?`
 `+i:""),this.inner=i||null):typeof a=="object"&&(this.message=a.name+" "+a.message,this.inner=a):(this.message=sa[t]||n,this.inner=null)}return Fe(r).from(la),e[t]=r,e},{});k.Syntax=SyntaxError,k.Type=TypeError,k.Range=RangeError;var er=Jn.reduce(function(e,t){return e[t+"Error"]=k[t],e},{});function fa(e,t){if(!e||e instanceof Ye||e instanceof TypeError||e instanceof SyntaxError||!e.name||!er[e.name])return e;var n=new er[e.name](t||e.message,e);return"stack"in e&&he(n,"stack",{get:function(){return this.inner.stack}}),n}var gt=en.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=k[t]),e},{});gt.ModifyError=mt,gt.DexieError=Ye,gt.BulkError=$e;function U(){}function Je(e){return e}function da(e,t){return e==null||e===Je?t:function(n){return t(e(n))}}function Pe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ha(e,t){return e===U?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Pe(r,this.onsuccess):r),a&&(this.onerror=this.onerror?Pe(a,this.onerror):a),i!==void 0?i:n}}function va(e,t){return e===U?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Pe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Pe(r,this.onerror):r)}}function pa(e,t){return e===U?t:function(n){var r=e.apply(this,arguments);ee(n,r);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Pe(a,this.onsuccess):a),i&&(this.onerror=this.onerror?Pe(i,this.onerror):i),r===void 0?o===void 0?void 0:o:ee(r,o)}}function ya(e,t){return e===U?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function tn(e,t){return e===U?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,i=new Array(a);a--;)i[a]=arguments[a];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}var Ze={},ma=100,ga=20,tr=100,nn=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,Ge(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Ge(t),e]}(),rn=nn[0],wt=nn[1],an=nn[2],nr=wt&&wt.then,bt=rn&&rn.constructor,on=!!an,un=!1,wa=an?function(){an.then(Ct)}:B.setImmediate?setImmediate.bind(null,Ct):B.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Ct(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Ct,0)},et=function(e,t){tt.push([e,t]),_t&&(wa(),_t=!1)},sn=!0,_t=!0,Me=[],Tt=[],cn=null,ln=Je,We={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{dr(e[0],e[1])}catch{}})}},E=We,tt=[],Oe=0,xt=[];function C(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=U,this._lib=!1;var t=this._PSD=E;if(se&&(this._stackHolder=ke(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Ze)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&dn(this,this._value);return}this._state=null,this._value=null,++t.ref,ar(this,e)}var fn={get:function(){var e=E,t=St;function n(r,a){var i=this,o=!e.global&&(e!==E||t!==St),u=o&&!ye(),s=new C(function(c,l){hn(i,new rr(Pt(r,e,o,u),Pt(a,e,o,u),c,l,e))});return se&&ur(s,this),s}return n.prototype=Ze,n},set:function(e){he(this,"then",e&&e.prototype===Ze?fn:{get:function(){return e},set:fn.set})}};Be(C.prototype,{then:fn,_then:function(e,t){hn(this,new rr(null,null,e,t,E))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Dt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Dt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Dt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{un=!0;var e=or(this,[],ga),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{un=!1}}},timeout:function(e,t){var n=this;return e<1/0?new C(function(r,a){var i=setTimeout(function(){return a(new k.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&he(C.prototype,Symbol.toStringTag,"Dexie.Promise"),We.env=sr();function rr(e,t,n,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=a}Be(C,{all:function(){var e=pe.apply(null,arguments).map(kt);return new C(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(a,i){return C.resolve(a).then(function(o){e[i]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof C)return e;if(e&&typeof e.then=="function")return new C(function(n,r){e.then(n,r)});var t=new C(Ze,!0,e);return ur(t,cn),t},reject:Dt,race:function(){var e=pe.apply(null,arguments).map(kt);return new C(function(t,n){e.map(function(r){return C.resolve(r).then(t,n)})})},PSD:{get:function(){return E},set:function(e){return E=e}},totalEchoes:{get:function(){return St}},newPSD:_e,usePSD:qe,scheduler:{get:function(){return et},set:function(e){et=e}},rejectionMapper:{get:function(){return ln},set:function(e){ln=e}},follow:function(e,t){return new C(function(n,r){return _e(function(a,i){var o=E;o.unhandleds=[],o.onunhandled=i,o.finalize=Pe(function(){var u=this;_a(function(){u.unhandleds.length===0?a():i(u.unhandleds[0])})},o.finalize),e()},t,n,r)})}}),bt&&(bt.allSettled&&he(C,"allSettled",function(){var e=pe.apply(null,arguments).map(kt);return new C(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(a,i){return C.resolve(a).then(function(o){return r[i]={status:"fulfilled",value:o}},function(o){return r[i]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),bt.any&&typeof AggregateError!="undefined"&&he(C,"any",function(){var e=pe.apply(null,arguments).map(kt);return new C(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(i,o){return C.resolve(i).then(function(u){return t(u)},function(u){a[o]=u,--r||n(new AggregateError(a))})})})}));function ar(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&nt();n&&typeof n.then=="function"?ar(e,function(a,i){n instanceof C?n._then(a,i):n.then(a,i)}):(e._state=!0,e._value=n,ir(e)),r&&rt()}},dn.bind(null,e))}catch(n){dn(e,n)}}function dn(e,t){if(Tt.push(t),e._state===null){var n=e._lib&&nt();t=ln(t),e._state=!1,e._value=t,se&&t!==null&&typeof t=="object"&&!t._promise&&ea(function(){var r=Gt(t,"stack");t._promise=e,he(t,"stack",{get:function(){return un?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Ta(e),ir(e),n&&rt()}}function ir(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)hn(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),Oe===0&&(++Oe,et(function(){--Oe==0&&vn()},[]))}function hn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Oe,et(ba,[n,e,t])}function ba(e,t,n){try{cn=t;var r,a=t._value;t._state?r=e(a):(Tt.length&&(Tt=[]),r=e(a),Tt.indexOf(a)===-1&&xa(t)),n.resolve(r)}catch(i){n.reject(i)}finally{cn=null,--Oe==0&&vn(),--n.psd.ref||n.psd.finalize()}}function or(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var a=e._value,i,o;a!=null?(i=a.name||"Error",o=a.message||a,r=Zt(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return se&&(r=Zt(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&or(e._prev,t,n)),t}function ur(e,t){var n=t?t._numPrev+1:0;n<ma&&(e._prev=t,e._numPrev=n)}function Ct(){nt()&&rt()}function nt(){var e=sn;return sn=!1,_t=!1,e}function rt(){var e,t,n;do for(;tt.length>0;)for(e=tt,tt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(tt.length>0);sn=!0,_t=!0}function vn(){var e=Me;Me=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=xt.slice(0),n=t.length;n;)t[--n]()}function _a(e){function t(){e(),xt.splice(xt.indexOf(t),1)}xt.push(t),++Oe,et(function(){--Oe==0&&vn()},[])}function Ta(e){Me.some(function(t){return t._value===e._value})||Me.push(e)}function xa(e){for(var t=Me.length;t;)if(Me[--t]._value===e._value){Me.splice(t,1);return}}function Dt(e){return new C(Ze,!1,e)}function N(e,t){var n=E;return function(){var r=nt(),a=E;try{return Te(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{Te(a,!1),r&&rt()}}}var J={awaits:0,echoes:0,id:0},Ca=0,Et=[],pn=0,St=0,Da=0;function _e(e,t,n,r){var a=E,i=Object.create(a);i.parent=a,i.ref=0,i.global=!1,i.id=++Da;var o=We.env;i.env=on?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:lr(o.nthen,i),gthen:lr(o.gthen,i)}:{},t&&ee(i,t),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=qe(i,e,n,r);return i.ref===0&&i.finalize(),u}function Le(){return J.id||(J.id=++Ca),++J.awaits,J.echoes+=tr,J.id}function ye(){return J.awaits?(--J.awaits==0&&(J.id=0),J.echoes=J.awaits*tr,!0):!1}(""+nr).indexOf("[native code]")===-1&&(Le=ye=U);function kt(e){return J.echoes&&e&&e.constructor===bt?(Le(),e.then(function(t){return ye(),t},function(t){return ye(),V(t)})):e}function Ea(e){++St,(!J.echoes||--J.echoes==0)&&(J.echoes=J.id=0),Et.push(E),Te(e,!0)}function Sa(){var e=Et[Et.length-1];Et.pop(),Te(e,!1)}function Te(e,t){var n=E;if((t?J.echoes&&(!pn++||e!==E):pn&&(!--pn||e!==E))&&cr(t?Ea.bind(null,e):Sa),e!==E&&(E=e,n===We&&(We.env=sr()),on)){var r=We.env.Promise,a=e.env;wt.then=a.nthen,r.prototype.then=a.gthen,(n.global||e.global)&&(Object.defineProperty(B,"Promise",a.PromiseProp),r.all=a.all,r.race=a.race,r.resolve=a.resolve,r.reject=a.reject,a.allSettled&&(r.allSettled=a.allSettled),a.any&&(r.any=a.any))}}function sr(){var e=B.Promise;return on?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(B,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:wt.then,gthen:e.prototype.then}:{}}function qe(e,t,n,r,a){var i=E;try{return Te(e,!0),t(n,r,a)}finally{Te(i,!1)}}function cr(e){nr.call(rn,e)}function Pt(e,t,n,r){return typeof e!="function"?e:function(){var a=E;n&&Le(),Te(t,!0);try{return e.apply(this,arguments)}finally{Te(a,!1),r&&cr(ye)}}}function lr(e,t){return function(n,r){return e.call(this,Pt(n,t),Pt(r,t))}}var fr="unhandledrejection";function dr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,a={promise:t,reason:e};if(B.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(fr,!0,!0),ee(r,a)):B.CustomEvent&&(r=new CustomEvent(fr,{detail:a}),ee(r,a)),r&&B.dispatchEvent&&(dispatchEvent(r),!B.PromiseRejectionEvent&&B.onunhandledrejection))try{B.onunhandledrejection(r)}catch{}se&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var V=C.reject;function hr(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!E.letThrough&&!e._vip){if(e._state.openComplete)return V(new k.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return V(new k.DatabaseClosed);e.open().catch(U)}return e._state.dbReadyPromise.then(function(){return hr(e,t,n,r)})}else{var a=e._createTransaction(t,n,e._dbSchema);try{a.create()}catch(i){return V(i)}return a._promise(t,function(i,o){return _e(function(){return E.trans=a,r(i,o,a)})}).then(function(i){return a._completion.then(function(){return i})})}}var vr="3.2.0",Ae=String.fromCharCode(65535),yn=-1/0,me="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",pr="String expected.",at=[],Mt=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ka=Mt,Pa=Mt,yr=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Ot="__dbnames",mn="readonly",gn="readwrite";function Ie(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var mr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function At(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=ze(t),delete t[e]),t}:function(t){return t}}var Ma=function(){function e(){}return e.prototype._trans=function(t,n,r){var a=this._tx||E.trans,i=this.name;function o(s,c,l){if(!l.schema[i])throw new k.NotFound("Table "+i+" not part of transaction");return n(l.idbtrans,l)}var u=nt();try{return a&&a.db===this.db?a===E.trans?a._promise(t,o,r):_e(function(){return a._promise(t,o,r)},{trans:a,transless:E.transless||E}):hr(this.db,t,[this.name],o)}finally{u&&rt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(a){return r.core.get({trans:a,key:t}).then(function(i){return r.hook.reading.fire(i)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if($(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=j(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(l){return l.compound&&n.every(function(f){return l.keyPath.indexOf(f)>=0})&&l.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Ae)return this.where(r.name).equals(r.keyPath.map(function(l){return t[l]}));!r&&se&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var a=this.schema.idxByName,i=this.db._deps.indexedDB;function o(l,f){try{return i.cmp(l,f)===0}catch{return!1}}var u=n.reduce(function(l,f){var d=l[0],_=l[1],v=a[f],h=t[f];return[d||v,d||!v?Ie(_,v&&v.multi?function(m){var g=ve(m,f);return $(g)&&g.some(function(w){return o(h,w)})}:function(m){return o(h,ve(m,f))}):_]},[null,null]),s=u[0],c=u[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,$(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var a=Object.create(t.prototype);for(var i in r)if(ae(r,i))try{a[i]=r[i]}catch{}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){ee(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,a=this.schema.primKey,i=a.auto,o=a.keyPath,u=t;return o&&i&&(u=At(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{oe(t,o,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!$(t)){var r=ve(t,this.schema.primKey.keyPath);if(r===void 0)return V(new k.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?j(n).forEach(function(a){oe(t,a,n[a])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,a=this.schema.primKey,i=a.auto,o=a.keyPath,u=t;return o&&i&&(u=At(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{oe(t,o,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?C.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:mr})}).then(function(n){return n.numFailures?C.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(a){return a.map(function(i){return n.hook.reading.fire(i)})})})},e.prototype.bulkAdd=function(t,n,r){var a=this,i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=a.schema.primKey,c=s.auto,l=s.keyPath;if(l&&i)throw new k.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new k.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=l&&c?t.map(At(l)):t;return a.core.mutate({trans:u,type:"add",keys:i,values:d,wantResults:o}).then(function(_){var v=_.numFailures,h=_.results,m=_.lastResult,g=_.failures,w=o?h:m;if(v===0)return w;throw new $e(a.name+".bulkAdd(): "+v+" of "+f+" operations failed",g)})})},e.prototype.bulkPut=function(t,n,r){var a=this,i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=a.schema.primKey,c=s.auto,l=s.keyPath;if(l&&i)throw new k.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new k.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=l&&c?t.map(At(l)):t;return a.core.mutate({trans:u,type:"put",keys:i,values:d,wantResults:o}).then(function(_){var v=_.numFailures,h=_.results,m=_.lastResult,g=_.failures,w=o?h:m;if(v===0)return w;throw new $e(a.name+".bulkPut(): "+v+" of "+f+" operations failed",g)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"delete",keys:t})}).then(function(a){var i=a.numFailures,o=a.lastResult,u=a.failures;if(i===0)return o;throw new $e(n.name+".bulkDelete(): "+i+" of "+r+" operations failed",u)})},e}();function it(e){var t={},n=function(u,s){if(s){for(var c=arguments.length,l=new Array(c-1);--c;)l[c-1]=arguments[c];return t[u].subscribe.apply(null,l),e}else if(typeof u=="string")return t[u]};n.addEventType=i;for(var r=1,a=arguments.length;r<a;++r)i(arguments[r]);return n;function i(u,s,c){if(typeof u=="object")return o(u);s||(s=ya),c||(c=U);var l={subscribers:[],fire:c,subscribe:function(f){l.subscribers.indexOf(f)===-1&&(l.subscribers.push(f),l.fire=s(l.fire,f))},unsubscribe:function(f){l.subscribers=l.subscribers.filter(function(d){return d!==f}),l.fire=l.subscribers.reduce(s,c)}};return t[u]=n[u]=l,l}function o(u){j(u).forEach(function(s){var c=u[s];if($(c))i(s,u[s][0],u[s][1]);else if(c==="asap")var l=i(s,Je,function(){for(var d=arguments.length,_=new Array(d);d--;)_[d]=arguments[d];l.subscribers.forEach(function(v){jn(function(){v.apply(null,_)})})});else throw new k.InvalidArgument("Invalid event config")})}}function ot(e,t){return Fe(t).from({prototype:e}),t}function Oa(e){return ot(Ma.prototype,function(n,r,a){this.db=e,this._tx=a,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:it(null,{creating:[ha,U],reading:[da,Je],updating:[pa,U],deleting:[va,U]})})}function He(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wn(e,t){e.filter=Ie(e.filter,t)}function bn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ie(r(),t())}:t,e.justLimit=n&&!r}function Aa(e,t){e.isMatch=Ie(e.isMatch,t)}function It(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new k.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function gr(e,t,n){var r=It(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Rt(e,t,n,r){var a=e.replayFilter?Ie(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},o=function(u,s,c){if(!a||a(s,c,function(d){return s.stop(d)},function(d){return s.fail(d)})){var l=s.primaryKey,f=""+l;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(l)),ae(i,f)||(i[f]=!0,t(u,s,c))}};return Promise.all([e.or._iterate(o,n),wr(gr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return wr(gr(e,r,n),Ie(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function wr(e,t,n,r){var a=r?function(o,u,s){return n(r(o),u,s)}:n,i=N(a);return e.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!t||t(o,function(s){return u=s},function(s){o.stop(s),u=U},function(s){o.fail(s),u=U}))&&i(o.value,o,function(s){return u=s}),u()})})}function te(e,t){try{var n=br(e),r=br(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Ra(_r(e),_r(t));case"Array":return Ia(e,t)}}catch{}return NaN}function Ia(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,i=0;i<a;++i){var o=te(e[i],t[i]);if(o!==0)return o}return n===r?0:n<r?-1:1}function Ra(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,i=0;i<a;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===r?0:n<r?-1:1}function br(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=zt(e);return n==="ArrayBuffer"?"binary":n}function _r(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ka=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,V.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,V.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Ie(n.algorithm,t)},e.prototype._iterate=function(t,n){return Rt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&ee(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Rt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var a=n._ctx,i=a.table.core;if(He(a,!0))return i.count({trans:r,query:{index:It(a,i.schema),range:a.range}}).then(function(u){return Math.min(u,a.limit)});var o=0;return Rt(a,function(){return++o,!1},r,i).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),a=r[0],i=r.length-1;function o(c,l){return l?o(c[r[l]],l-1):c[a]}var u=this._ctx.dir==="next"?1:-1;function s(c,l){var f=o(c,i),d=o(l,i);return f<d?-u:f>d?u:0}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var a=n._ctx;if(a.dir==="next"&&He(a,!0)&&a.limit>0){var i=a.valueMapper,o=It(a,a.table.core.schema);return a.table.core.query({trans:r,limit:a.limit,values:!0,query:{index:o,range:a.range}}).then(function(s){var c=s.result;return i?c.map(i):c})}else{var u=[];return Rt(a,function(s){return u.push(s)},r,a.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,He(n)?bn(n,function(){var r=t;return function(a,i){return r===0?!0:r===1?(--r,!1):(i(function(){a.advance(r),r=0}),!1)}}):bn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),bn(this._ctx,function(){var n=t;return function(r,a,i){return--n<=0&&a(i),n>=0}},!0),this},e.prototype.until=function(t,n){return wn(this._ctx,function(r,a,i){return t(r.value)?(a(i),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return wn(this._ctx,function(n){return t(n.value)}),Aa(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){t(a.key,a)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){t(a.primaryKey,a)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,i){r.push(i.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&He(n,!0)&&n.limit>0)return this._read(function(a){var i=It(n,n.table.core.schema);return n.table.core.query({trans:a,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(function(a){var i=a.result;return i}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return wn(this._ctx,function(a){var i=a.primaryKey.toString(),o=ae(r,i);return r[i]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(a){var i;if(typeof t=="function")i=t;else{var o=j(t),u=o.length;i=function(g){for(var w=!1,y=0;y<u;++y){var b=o[y],p=t[b];ve(g,b)!==p&&(oe(g,b,p),w=!0)}return w}}var s=r.table.core,c=s.schema.primaryKey,l=c.outbound,f=c.extractKey,d=n.db._options.modifyChunkSize||200,_=[],v=0,h=[],m=function(g,w){var y=w.failures,b=w.numFailures;v+=g-b;for(var p=0,T=j(y);p<T.length;p++){var D=T[p];_.push(y[D])}};return n.clone().primaryKeys().then(function(g){var w=function(y){var b=Math.min(d,g.length-y);return s.getMany({trans:a,keys:g.slice(y,y+b),cache:"immutable"}).then(function(p){for(var T=[],D=[],x=l?[]:null,S=[],M=0;M<b;++M){var I=p[M],R={value:ze(I),primKey:g[y+M]};i.call(R,R.value,R)!==!1&&(R.value==null?S.push(g[y+M]):!l&&te(f(I),f(R.value))!==0?(S.push(g[y+M]),T.push(R.value)):(D.push(R.value),l&&x.push(g[y+M])))}var O=He(r)&&r.limit===1/0&&(typeof t!="function"||t===_n)&&{index:r.index,range:r.range};return Promise.resolve(T.length>0&&s.mutate({trans:a,type:"add",values:T}).then(function(G){for(var P in G.failures)S.splice(parseInt(P),1);m(T.length,G)})).then(function(){return(D.length>0||O&&typeof t=="object")&&s.mutate({trans:a,type:"put",keys:x,values:D,criteria:O,changeSpec:typeof t!="function"&&t}).then(function(G){return m(D.length,G)})}).then(function(){return(S.length>0||O&&t===_n)&&s.mutate({trans:a,type:"delete",keys:S,criteria:O}).then(function(G){return m(S.length,G)})}).then(function(){return g.length>y+b&&w(y+d)})})};return w(0).then(function(){if(_.length>0)throw new mt("Error modifying one or more objects",_,v,h);return g.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return He(t)&&(t.isPrimKey&&!Pa||n.type===3)?this._write(function(r){var a=t.table.core.schema.primaryKey,i=n;return t.table.core.count({trans:r,query:{index:a,range:i}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(function(u){var s=u.failures;u.lastResult,u.results;var c=u.numFailures;if(c)throw new mt("Could not delete some values",Object.keys(s).map(function(l){return s[l]}),o-c);return o-c})})}):this.modify(_n)},e}(),_n=function(e,t){return t.value=null};function Ua(e){return ot(Ka.prototype,function(n,r){this.db=e;var a=mr,i=null;if(r)try{a=r()}catch(c){i=c}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:s!==Je?s:null}})}function Ba(e,t){return e<t?-1:e===t?0:1}function Fa(e,t){return e>t?-1:e===t?0:1}function re(e,t,n){var r=e instanceof xr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function je(e){return new e.Collection(e,function(){return Tr("")}).limit(0)}function Na(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ya(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Wa(e,t,n,r,a,i){for(var o=Math.min(e.length,r.length),u=-1,s=0;s<o;++s){var c=t[s];if(c!==r[s])return a(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):a(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;a(e[s],c)<0&&(u=s)}return o<r.length&&i==="next"?e+n.substr(e.length):o<e.length&&i==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function Kt(e,t,n,r){var a,i,o,u,s,c,l,f=n.length;if(!n.every(function(h){return typeof h=="string"}))return re(e,pr);function d(h){a=Na(h),i=Ya(h),o=h==="next"?Ba:Fa;var m=n.map(function(g){return{lower:i(g),upper:a(g)}}).sort(function(g,w){return o(g.lower,w.lower)});u=m.map(function(g){return g.upper}),s=m.map(function(g){return g.lower}),c=h,l=h==="next"?"":r}d("next");var _=new e.Collection(e,function(){return xe(u[0],s[f-1]+r)});_._ondirectionchange=function(h){d(h)};var v=0;return _._addAlgorithm(function(h,m,g){var w=h.key;if(typeof w!="string")return!1;var y=i(w);if(t(y,s,v))return!0;for(var b=null,p=v;p<f;++p){var T=Wa(w,y,u[p],s[p],o,c);T===null&&b===null?v=p+1:(b===null||o(b,T)>0)&&(b=T)}return m(b!==null?function(){h.continue(b+l)}:g),!1}),_}function xe(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Tr(e){return{type:1,lower:e,upper:e}}var xr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,a){r=r!==!1,a=a===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||a)&&!(r&&a)?je(this):new this.Collection(this,function(){return xe(t,n,!r,!a)})}catch{return re(this,me)}},e.prototype.equals=function(t){return t==null?re(this,me):new this.Collection(this,function(){return Tr(t)})},e.prototype.above=function(t){return t==null?re(this,me):new this.Collection(this,function(){return xe(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?re(this,me):new this.Collection(this,function(){return xe(t,void 0,!1)})},e.prototype.below=function(t){return t==null?re(this,me):new this.Collection(this,function(){return xe(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?re(this,me):new this.Collection(this,function(){return xe(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?re(this,pr):this.between(t,t+Ae,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Kt(this,function(n,r){return n.indexOf(r[0])===0},[t],Ae)},e.prototype.equalsIgnoreCase=function(t){return Kt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=pe.apply(Ne,arguments);return t.length===0?je(this):Kt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=pe.apply(Ne,arguments);return t.length===0?je(this):Kt(this,function(n,r){return r.some(function(a){return n.indexOf(a)===0})},t,Ae)},e.prototype.anyOf=function(){var t=this,n=pe.apply(Ne,arguments),r=this._cmp;try{n.sort(r)}catch{return re(this,me)}if(n.length===0)return je(this);var a=new this.Collection(this,function(){return xe(n[0],n[n.length-1])});a._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var i=0;return a._addAlgorithm(function(o,u,s){for(var c=o.key;r(c,n[i])>0;)if(++i,i===n.length)return u(s),!1;return r(c,n[i])===0?!0:(u(function(){o.continue(n[i])}),!1)}),a},e.prototype.notEqual=function(t){return this.inAnyRange([[yn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=pe.apply(Ne,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return re(this,me)}var n=t.reduce(function(r,a){return r?r.concat([[r[r.length-1][1],a]]):[[yn,a]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,a=this._cmp,i=this._ascending,o=this._descending,u=this._min,s=this._max;if(t.length===0)return je(this);if(!t.every(function(p){return p[0]!==void 0&&p[1]!==void 0&&i(p[0],p[1])<=0}))return re(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",k.InvalidArgument);var c=!n||n.includeLowers!==!1,l=n&&n.includeUppers===!0;function f(p,T){for(var D=0,x=p.length;D<x;++D){var S=p[D];if(a(T[0],S[1])<0&&a(T[1],S[0])>0){S[0]=u(S[0],T[0]),S[1]=s(S[1],T[1]);break}}return D===x&&p.push(T),p}var d=i;function _(p,T){return d(p[0],T[0])}var v;try{v=t.reduce(f,[]),v.sort(_)}catch{return re(this,me)}var h=0,m=l?function(p){return i(p,v[h][1])>0}:function(p){return i(p,v[h][1])>=0},g=c?function(p){return o(p,v[h][0])>0}:function(p){return o(p,v[h][0])>=0};function w(p){return!m(p)&&!g(p)}var y=m,b=new this.Collection(this,function(){return xe(v[0][0],v[v.length-1][1],!c,!l)});return b._ondirectionchange=function(p){p==="next"?(y=m,d=i):(y=g,d=o),v.sort(_)},b._addAlgorithm(function(p,T,D){for(var x=p.key;y(x);)if(++h,h===v.length)return T(D),!1;return w(x)?!0:(r._cmp(x,v[h][1])===0||r._cmp(x,v[h][0])===0||T(function(){d===i?p.continue(v[h][0]):p.continue(v[h][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=pe.apply(Ne,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?je(this):this.inAnyRange(t.map(function(n){return[n,n+Ae]})):re(this,"startsWithAnyOf() only works with strings")},e}();function La(e){return ot(xr.prototype,function(n,r,a){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:a};var i=e._deps.indexedDB;if(!i)throw new k.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(o,u){return i.cmp(u,o)},this._max=function(o,u){return i.cmp(o,u)>0?o:u},this._min=function(o,u){return i.cmp(o,u)<0?o:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function ce(e){return N(function(t){return ut(t),e(t.target.error),!1})}function ut(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var st="storagemutated",Ce="x-storagemutated-1",De=it(null,st),qa=function(){function e(){}return e.prototype._lock=function(){return Ve(!E.global),++this._reculock,this._reculock===1&&!E.global&&(E.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Ve(!E.global),--this._reculock==0)for(E.global||(E.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{qe(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&E.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,a=this.db._state.dbOpenError;if(Ve(!this.idbtrans),!t&&!r)switch(a&&a.name){case"DatabaseClosedError":throw new k.DatabaseClosed(a);case"MissingAPIError":throw new k.MissingAPI(a.message,a);default:throw new k.OpenFailed(a)}if(!this.active)throw new k.TransactionInactive;return Ve(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=N(function(i){ut(i),n._reject(t.error)}),t.onabort=N(function(i){ut(i),n.active&&n._reject(new k.Abort(t.error)),n.active=!1,n.on("abort").fire(i)}),t.oncomplete=N(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&De.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return V(new k.ReadOnly("Transaction is readonly"));if(!this.active)return V(new k.TransactionInactive);if(this._locked())return new C(function(o,u){a._blockedFuncs.push([function(){a._promise(t,n,r).then(o,u)},E])});if(r)return _e(function(){var o=new C(function(u,s){a._lock();var c=n(u,s,a);c&&c.then&&c.then(u,s)});return o.finally(function(){return a._unlock()}),o._lib=!0,o});var i=new C(function(o,u){var s=n(o,u,a);s&&s.then&&s.then(o,u)});return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=C.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var a=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(a.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new C(function(o,u){r.then(function(s){return n._waitingQueue.push(N(o.bind(null,s)))},function(s){return n._waitingQueue.push(N(u.bind(null,s)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new k.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ae(n,t))return n[t];var r=this.schema[t];if(!r)throw new k.NotFound("Table "+t+" not part of transaction");var a=new this.db.Table(t,r,this);return a.core=this.db.core.table(t),n[t]=a,a},e}();function Ha(e){return ot(qa.prototype,function(n,r,a,i,o){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=a,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=it(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C(function(s,c){u._resolve=s,u._reject=c}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var c=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):c&&u.idbtrans&&u.idbtrans.abort(),V(s)})})}function Tn(e,t,n,r,a,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(a?"++":"")+Cr(t)}}function Cr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Dr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Qn(n,function(r){return[r.name,r]})}}function ja(e){return e.length===1?e[0]:e}var ct=function(e){try{return e.only([[]]),ct=function(){return[[]]},[[]]}catch{return ct=function(){return Ae},Ae}};function xn(e){return e==null?function(){}:typeof e=="string"?Qa(e):function(t){return ve(t,e)}}function Qa(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ve(n,e)}}function Er(e){return[].slice.call(e)}var Xa=0;function lt(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Ga(e,t,n){function r(f,d){var _=Er(f.objectStoreNames);return{schema:{name:f.name,tables:_.map(function(v){return d.objectStore(v)}).map(function(v){var h=v.keyPath,m=v.autoIncrement,g=$(h),w=h==null,y={},b={name:v.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:g,keyPath:h,autoIncrement:m,unique:!0,extractKey:xn(h)},indexes:Er(v.indexNames).map(function(p){return v.index(p)}).map(function(p){var T=p.name,D=p.unique,x=p.multiEntry,S=p.keyPath,M=$(S),I={name:T,compound:M,keyPath:S,unique:D,multiEntry:x,extractKey:xn(S)};return y[lt(S)]=I,I}),getIndexByKeyPath:function(p){return y[lt(p)]}};return y[":id"]=b.primaryKey,h!=null&&(y[lt(h)]=b.primaryKey),b})},hasGetAll:_.length>0&&"getAll"in d.objectStore(_[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=f.lower,_=f.upper,v=f.lowerOpen,h=f.upperOpen,m=d===void 0?_===void 0?null:t.upperBound(_,!!h):_===void 0?t.lowerBound(d,!!v):t.bound(d,_,!!v,!!h);return m}function i(f){var d=f.name;function _(m){var g=m.trans,w=m.type,y=m.keys,b=m.values,p=m.range;return new Promise(function(T,D){T=N(T);var x=g.objectStore(d),S=x.keyPath==null,M=w==="put"||w==="add";if(!M&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var I=(y||b||{length:1}).length;if(y&&b&&y.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(I===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});var R,O=[],G=[],P=0,z=function(de){++P,ut(de)};if(w==="deleteRange"){if(p.type===4)return T({numFailures:P,failures:G,results:[],lastResult:void 0});p.type===3?O.push(R=x.clear()):O.push(R=x.delete(a(p)))}else{var F=M?S?[b,y]:[b,null]:[y,null],Q=F[0],Z=F[1];if(M)for(var ie=0;ie<I;++ie)O.push(R=Z&&Z[ie]!==void 0?x[w](Q[ie],Z[ie]):x[w](Q[ie])),R.onerror=z;else for(var ie=0;ie<I;++ie)O.push(R=x[w](Q[ie])),R.onerror=z}var Se=function(de){var pt=de.target.result;O.forEach(function(ue,jt){return ue.error!=null&&(G[jt]=ue.error)}),T({numFailures:P,failures:G,results:w==="delete"?y:O.map(function(ue){return ue.result}),lastResult:pt})};R.onerror=function(de){z(de),Se(de)},R.onsuccess=Se})}function v(m){var g=m.trans,w=m.values,y=m.query,b=m.reverse,p=m.unique;return new Promise(function(T,D){T=N(T);var x=y.index,S=y.range,M=g.objectStore(d),I=x.isPrimaryKey?M:M.index(x.name),R=b?p?"prevunique":"prev":p?"nextunique":"next",O=w||!("openKeyCursor"in I)?I.openCursor(a(S),R):I.openKeyCursor(a(S),R);O.onerror=ce(D),O.onsuccess=N(function(G){var P=O.result;if(!P){T(null);return}P.___id=++Xa,P.done=!1;var z=P.continue.bind(P),F=P.continuePrimaryKey;F&&(F=F.bind(P));var Q=P.advance.bind(P),Z=function(){throw new Error("Cursor not started")},ie=function(){throw new Error("Cursor not stopped")};P.trans=g,P.stop=P.continue=P.continuePrimaryKey=P.advance=Z,P.fail=N(D),P.next=function(){var Se=this,de=1;return this.start(function(){return de--?Se.continue():Se.stop()}).then(function(){return Se})},P.start=function(Se){var de=new Promise(function(ue,jt){ue=N(ue),O.onerror=ce(jt),P.fail=jt,P.stop=function(su){P.stop=P.continue=P.continuePrimaryKey=P.advance=ie,ue(su)}}),pt=function(){if(O.result)try{Se()}catch(ue){P.fail(ue)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return O.onsuccess=N(function(ue){O.onsuccess=pt,pt()}),P.continue=z,P.continuePrimaryKey=F,P.advance=Q,pt(),de},T(P)},D)})}function h(m){return function(g){return new Promise(function(w,y){w=N(w);var b=g.trans,p=g.values,T=g.limit,D=g.query,x=T===1/0?void 0:T,S=D.index,M=D.range,I=b.objectStore(d),R=S.isPrimaryKey?I:I.index(S.name),O=a(M);if(T===0)return w({result:[]});if(m){var G=p?R.getAll(O,x):R.getAllKeys(O,x);G.onsuccess=function(Q){return w({result:Q.target.result})},G.onerror=ce(y)}else{var P=0,z=p||!("openKeyCursor"in R)?R.openCursor(O):R.openKeyCursor(O),F=[];z.onsuccess=function(Q){var Z=z.result;if(!Z)return w({result:F});if(F.push(p?Z.value:Z.primaryKey),++P===T)return w({result:F});Z.continue()},z.onerror=ce(y)}})}}return{name:d,schema:f,mutate:_,getMany:function(m){var g=m.trans,w=m.keys;return new Promise(function(y,b){y=N(y);for(var p=g.objectStore(d),T=w.length,D=new Array(T),x=0,S=0,M,I=function(P){var z=P.target;(D[z._pos]=z.result)!=null,++S===x&&y(D)},R=ce(b),O=0;O<T;++O){var G=w[O];G!=null&&(M=p.get(w[O]),M._pos=O,M.onsuccess=I,M.onerror=R,++x)}x===0&&y(D)})},get:function(m){var g=m.trans,w=m.key;return new Promise(function(y,b){y=N(y);var p=g.objectStore(d),T=p.get(w);T.onsuccess=function(D){return y(D.target.result)},T.onerror=ce(b)})},query:h(s),openCursor:v,count:function(m){var g=m.query,w=m.trans,y=g.index,b=g.range;return new Promise(function(p,T){var D=w.objectStore(d),x=y.isPrimaryKey?D:D.index(y.name),S=a(b),M=S?x.count(S):x.count();M.onsuccess=N(function(I){return p(I.target.result)}),M.onerror=ce(T)})}}}var o=r(e,n),u=o.schema,s=o.hasGetAll,c=u.tables.map(function(f){return i(f)}),l={};return c.forEach(function(f){return l[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var d=l[f];if(!d)throw new Error("Table '"+f+"' not found");return l[f]},MIN_KEY:-1/0,MAX_KEY:ct(t),schema:u}}function Va(e,t){return t.reduce(function(n,r){var a=r.create;return A(A({},n),a(n))},e)}function za(e,t,n,r){var a=n.IDBKeyRange;n.indexedDB;var i=Va(Ga(t,a,r),e.dbcore);return{dbcore:i}}function Cn(e,t){var n=e._novip,r=t.db,a=za(n._middlewares,r,n._deps,t);n.core=a.dbcore,n.tables.forEach(function(i){var o=i.name;n.core.schema.tables.some(function(u){return u.name===o})&&(i.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=i.core))})}function Ut(e,t,n,r){var a=e._novip;n.forEach(function(i){var o=r[i];t.forEach(function(u){var s=Gt(u,i);(!s||"value"in s&&s.value===void 0)&&(u===a.Transaction.prototype||u instanceof a.Transaction?he(u,i,{get:function(){return this.table(i)},set:function(c){qn(this,i,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):u[i]=new a.Table(i,o))})})}function Dn(e,t){var n=e._novip;t.forEach(function(r){for(var a in r)r[a]instanceof n.Table&&delete r[a]})}function $a(e,t){return e._cfg.version-t._cfg.version}function Ja(e,t,n,r){var a=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,a);i.create(n),i._completion.catch(r);var o=i._reject.bind(i),u=E.transless||E;_e(function(){E.trans=i,E.transless=u,t===0?(j(a).forEach(function(s){En(n,s,a[s].primKey,a[s].indexes)}),Cn(e,n),C.follow(function(){return e.on.populate.fire(i)}).catch(o)):Za(e,t,i,n).catch(o)})}function Za(e,t,n,r){var a=e._novip,i=[],o=a._versions,u=a._dbSchema=kn(a,a.idbdb,r),s=!1,c=o.filter(function(f){return f._cfg.version>=t});c.forEach(function(f){i.push(function(){var d=u,_=f._cfg.dbschema;Pn(a,d,r),Pn(a,_,r),u=a._dbSchema=_;var v=Sr(d,_);v.add.forEach(function(b){En(r,b[0],b[1].primKey,b[1].indexes)}),v.change.forEach(function(b){if(b.recreate)throw new k.Upgrade("Not yet support for changing primary key");var p=r.objectStore(b.name);b.add.forEach(function(T){return Sn(p,T)}),b.change.forEach(function(T){p.deleteIndex(T.name),Sn(p,T)}),b.del.forEach(function(T){return p.deleteIndex(T)})});var h=f._cfg.contentUpgrade;if(h&&f._cfg.version>t){Cn(a,r),n._memoizedTables={},s=!0;var m=Xn(_);v.del.forEach(function(b){m[b]=d[b]}),Dn(a,[a.Transaction.prototype]),Ut(a,[a.Transaction.prototype],j(m),m),n.schema=m;var g=Jt(h);g&&Le();var w,y=C.follow(function(){if(w=h(n),w&&g){var b=ye.bind(null,null);w.then(b,b)}});return w&&typeof w.then=="function"?C.resolve(w):y.then(function(){return w})}}),i.push(function(d){if(!s||!ka){var _=f._cfg.dbschema;ti(_,d)}Dn(a,[a.Transaction.prototype]),Ut(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),n.schema=a._dbSchema})});function l(){return i.length?C.resolve(i.shift()(n.idbtrans)).then(l):C.resolve()}return l().then(function(){ei(u,r)})}function Sr(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var a=e[r],i=t[r];if(!a)n.add.push([r,i]);else{var o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||a.primKey.auto!==i.primKey.auto&&!Mt)o.recreate=!0,n.change.push(o);else{var u=a.idxByName,s=i.idxByName,c=void 0;for(c in u)s[c]||o.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function En(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(i){return Sn(a,i)}),a}function ei(e,t){j(e).forEach(function(n){t.db.objectStoreNames.contains(n)||En(t,n,e[n].primKey,e[n].indexes)})}function ti(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Sn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function kn(e,t,n){var r={},a=yt(t.objectStoreNames,0);return a.forEach(function(i){for(var o=n.objectStore(i),u=o.keyPath,s=Tn(Cr(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),c=[],l=0;l<o.indexNames.length;++l){var f=o.index(o.indexNames[l]);u=f.keyPath;var d=Tn(f.name,u,!!f.unique,!!f.multiEntry,!1,u&&typeof u!="string",!1);c.push(d)}r[i]=Dr(i,s,c)}),r}function ni(e,t,n){var r=e._novip;r.verno=t.version/10;var a=r._dbSchema=kn(r,t,n);r._storeNames=yt(t.objectStoreNames,0),Ut(r,[r._allTables],j(a),a)}function ri(e,t){var n=kn(e,e.idbdb,t),r=Sr(n,e._dbSchema);return!(r.add.length||r.change.some(function(a){return a.add.length||a.change.length}))}function Pn(e,t,n){for(var r=e._novip,a=n.db.objectStoreNames,i=0;i<a.length;++i){var o=a[i],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],l=u.index(c).keyPath,f=typeof l=="string"?l:"["+yt(l).join("+")+"]";if(t[o]){var d=t[o].idxByName[f];d&&(d.name=c,delete t[o].idxByName[f],t[o].idxByName[c]=d)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&B.WorkerGlobalScope&&B instanceof B.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ai(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Tn(r,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),$(a),n===0)})}var ii=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){j(t).forEach(function(r){if(t[r]!==null){var a=ai(t[r]),i=a.shift();if(i.multi)throw new k.Schema("Primary key cannot be multi-valued");a.forEach(function(o){if(o.auto)throw new k.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new k.Schema("Index must have a name and cannot be an empty string")}),n[r]=Dr(r,i,a)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?ee(this._cfg.storesSource,t):t;var r=n._versions,a={},i={};return r.forEach(function(o){ee(a,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(a,i)}),n._dbSchema=i,Dn(n,[n._allTables,n,n.Transaction.prototype]),Ut(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],j(i),i),n._storeNames=j(i),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=tn(this._cfg.contentUpgrade||U,t),this},e}();function oi(e){return ot(ii.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Mn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new dt(Ot,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function On(e){return e&&typeof e.databases=="function"}function ui(e){var t=e.indexedDB,n=e.IDBKeyRange;return On(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==Ot})}):Mn(t,n).toCollection().primaryKeys()}function si(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!On(n)&&t!==Ot&&Mn(n,r).put({name:t}).catch(U)}function ci(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!On(n)&&t!==Ot&&Mn(n,r).delete(t).catch(U)}function An(e){return _e(function(){return E.letThrough=!0,e()})}function li(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function fi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?V(t.dbOpenError):e});se&&(t.openCanceller._stackHolder=ke()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function a(){if(t.openCanceller!==r)throw new k.DatabaseClosed("db.open() was cancelled")}var i=t.dbReadyResolve,o=null,u=!1;return C.race([r,(typeof navigator=="undefined"?C.resolve():li()).then(function(){return new C(function(s,c){if(a(),!n)throw new k.MissingAPI;var l=e.name,f=t.autoSchema?n.open(l):n.open(l,Math.round(e.verno*10));if(!f)throw new k.MissingAPI;f.onerror=ce(c),f.onblocked=N(e._fireOnBlocked),f.onupgradeneeded=N(function(d){if(o=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=ut,o.abort(),f.result.close();var _=n.deleteDatabase(l);_.onsuccess=_.onerror=N(function(){c(new k.NoSuchDatabase("Database "+l+" doesnt exist"))})}else{o.onerror=ce(c);var v=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;u=v<1,e._novip.idbdb=f.result,Ja(e,v/10,o,c)}},c),f.onsuccess=N(function(){o=null;var d=e._novip.idbdb=f.result,_=yt(d.objectStoreNames);if(_.length>0)try{var v=d.transaction(ja(_),"readonly");t.autoSchema?ni(e,d,v):(Pn(e,e._dbSchema,v),ri(e,v)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Cn(e,v)}catch{}at.push(e),d.onversionchange=N(function(h){t.vcFired=!0,e.on("versionchange").fire(h)}),d.onclose=N(function(h){e.on("close").fire(h)}),u&&si(e._deps,l),s()},c)})})]).then(function(){return a(),t.onReadyBeingFired=[],C.resolve(An(function(){return e.on.ready.fire(e.vip)})).then(function s(){if(t.onReadyBeingFired.length>0){var c=t.onReadyBeingFired.reduce(tn,U);return t.onReadyBeingFired=[],C.resolve(An(function(){return c(e.vip)})).then(s)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(s){t.dbOpenError=s;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),V(s)}).finally(function(){t.openComplete=!0,i()})}function In(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=i(t),a=i(n);function i(o){return function(u){var s=o(u),c=s.value;return s.done?c:!c||typeof c.then!="function"?$(c)?Promise.all(c).then(r,a):r(c):c.then(r,a)}}return i(t)()}function di(e,t,n){var r=arguments.length;if(r<2)throw new k.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];n=a.pop();var i=Gn(a);return[e,i,n]}function hi(e,t,n,r,a){return C.resolve().then(function(){var i=E.transless||E,o=e._createTransaction(t,n,e._dbSchema,r),u={trans:o,transless:i};r?o.idbtrans=r.idbtrans:o.create();var s=Jt(a);s&&Le();var c,l=C.follow(function(){if(c=a.call(o,o),c)if(s){var f=ye.bind(null,null);c.then(f,f)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=In(c))},u);return(c&&typeof c.then=="function"?C.resolve(c).then(function(f){return o.active?f:V(new k.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):l.then(function(){return c})).then(function(f){return r&&o._resolve(),o._completion.then(function(){return f})}).catch(function(f){return o._reject(f),V(f)})})}function Bt(e,t,n){for(var r=$(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}function vi(e){return A(A({},e),{table:function(t){var n=e.table(t),r=n.schema,a={},i=[];function o(h,m,g){var w=lt(h),y=a[w]=a[w]||[],b=h==null?0:typeof h=="string"?1:h.length,p=m>0,T=A(A({},g),{isVirtual:p,keyTail:m,keyLength:b,extractKey:xn(h),unique:!p&&g.unique});if(y.push(T),T.isPrimaryKey||i.push(T),b>1){var D=b===2?h[0]:h.slice(0,b-1);o(D,m+1,g)}return y.sort(function(x,S){return x.keyTail-S.keyTail}),T}var u=o(r.primaryKey.keyPath,0,r.primaryKey);a[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var l=c[s];o(l.keyPath,0,l)}function f(h){var m=a[lt(h)];return m&&m[0]}function d(h,m){return{type:h.type===1?2:h.type,lower:Bt(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Bt(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0}}function _(h){var m=h.query.index;return m.isVirtual?A(A({},h),{query:{index:m,range:d(h.query.range,m.keyTail)}}):h}var v=A(A({},n),{schema:A(A({},r),{primaryKey:u,indexes:i,getIndexByKeyPath:f}),count:function(h){return n.count(_(h))},query:function(h){return n.query(_(h))},openCursor:function(h){var m=h.query.index,g=m.keyTail,w=m.isVirtual,y=m.keyLength;if(!w)return n.openCursor(h);function b(p){function T(x){x!=null?p.continue(Bt(x,h.reverse?e.MAX_KEY:e.MIN_KEY,g)):h.unique?p.continue(p.key.slice(0,y).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,g)):p.continue()}var D=Object.create(p,{continue:{value:T},continuePrimaryKey:{value:function(x,S){p.continuePrimaryKey(Bt(x,e.MAX_KEY,g),S)}},primaryKey:{get:function(){return p.primaryKey}},key:{get:function(){var x=p.key;return y===1?x[0]:x.slice(0,y)}},value:{get:function(){return p.value}}});return D}return n.openCursor(_(h)).then(function(p){return p&&b(p)})}});return v}})}var pi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:vi};function Rn(e,t,n,r){return n=n||{},r=r||"",j(e).forEach(function(a){if(!ae(t,a))n[r+a]=void 0;else{var i=e[a],o=t[a];if(typeof i=="object"&&typeof o=="object"&&i&&o){var u=zt(i),s=zt(o);u!==s?n[r+a]=t[a]:u==="Object"?Rn(i,o,n,r+a+"."):i!==o&&(n[r+a]=t[a])}else i!==o&&(n[r+a]=t[a])}}),j(t).forEach(function(a){ae(e,a)||(n[r+a]=t[a])}),n}function yi(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var mi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return A(A({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,a=A(A({},n),{mutate:function(i){var o=E.trans,u=o.table(t).hook,s=u.deleting,c=u.creating,l=u.updating;switch(i.type){case"add":if(c.fire===U)break;return o._promise("readwrite",function(){return f(i)},!0);case"put":if(c.fire===U&&l.fire===U)break;return o._promise("readwrite",function(){return f(i)},!0);case"delete":if(s.fire===U)break;return o._promise("readwrite",function(){return f(i)},!0);case"deleteRange":if(s.fire===U)break;return o._promise("readwrite",function(){return d(i)},!0)}return n.mutate(i);function f(v){var h=E.trans,m=v.keys||yi(r,v);if(!m)throw new Error("Keys missing");return v=v.type==="add"||v.type==="put"?A(A({},v),{keys:m}):A({},v),v.type!=="delete"&&(v.values=Xt([],v.values,!0)),v.keys&&(v.keys=Xt([],v.keys,!0)),gi(n,v,m).then(function(g){var w=m.map(function(y,b){var p=g[b],T={onerror:null,onsuccess:null};if(v.type==="delete")s.fire.call(T,y,p,h);else if(v.type==="add"||p===void 0){var D=c.fire.call(T,y,v.values[b],h);y==null&&D!=null&&(y=D,v.keys[b]=y,r.outbound||oe(v.values[b],r.keyPath,y))}else{var x=Rn(p,v.values[b]),S=l.fire.call(T,x,y,p,h);if(S){var M=v.values[b];Object.keys(S).forEach(function(I){ae(M,I)?M[I]=S[I]:oe(M,I,S[I])})}}return T});return n.mutate(v).then(function(y){for(var b=y.failures,p=y.results,T=y.numFailures,D=y.lastResult,x=0;x<m.length;++x){var S=p?p[x]:m[x],M=w[x];S==null?M.onerror&&M.onerror(b[x]):M.onsuccess&&M.onsuccess(v.type==="put"&&g[x]?v.values[x]:S)}return{failures:b,results:p,numFailures:T,lastResult:D}}).catch(function(y){return w.forEach(function(b){return b.onerror&&b.onerror(y)}),Promise.reject(y)})})}function d(v){return _(v.trans,v.range,1e4)}function _(v,h,m){return n.query({trans:v,values:!1,query:{index:r,range:h},limit:m}).then(function(g){var w=g.result;return f({type:"delete",keys:w,trans:v}).then(function(y){return y.numFailures>0?Promise.reject(y.failures[0]):w.length<m?{failures:[],numFailures:0,lastResult:void 0}:_(v,A(A({},h),{lower:w[w.length-1],lowerOpen:!0}),m)})})}}});return a}})}};function gi(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function kr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],a=0,i=0;a<t.keys.length&&i<e.length;++a)te(t.keys[a],e[i])===0&&(r.push(n?ze(t.values[a]):t.values[a]),++i);return r.length===e.length?r:null}catch{return null}}var wi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return A(A({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var a=kr(r.keys,r.trans._cache,r.cache==="clone");return a?C.resolve(a):n.getMany(r).then(function(i){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?ze(i):i},i})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Kn;function Un(e){return!("from"in e)}var ge=function(e,t){if(this)ee(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ge;return e&&"d"in e&&ee(n,e),n}};Be(ge.prototype,(Kn={add:function(e){return Ft(this,e),this},addKey:function(e){return ft(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return ft(t,n,n)}),this}},Kn[$t]=function(){return Bn(this)},Kn));function ft(e,t,n){var r=te(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Un(e))return ee(e,{from:t,to:n,d:1});var a=e.l,i=e.r;if(te(n,e.from)<0)return a?ft(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Pr(e);if(te(t,e.to)>0)return i?ft(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Pr(e);te(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),te(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;a&&!e.l&&Ft(e,a),i&&o&&Ft(e,i)}}function Ft(e,t){function n(r,a){var i=a.from,o=a.to,u=a.l,s=a.r;ft(r,i,o),u&&n(r,u),s&&n(r,s)}Un(t)||n(e,t)}function bi(e,t){var n=Bn(t),r=n.next();if(r.done)return!1;for(var a=r.value,i=Bn(e),o=i.next(a.from),u=o.value;!r.done&&!o.done;){if(te(u.from,a.to)<=0&&te(u.to,a.from)>=0)return!0;te(a.from,u.from)<0?a=(r=n.next(u.from)).value:u=(o=i.next(a.from)).value}return!1}function Bn(e){var t=Un(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&te(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||te(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Pr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=r>1?"r":r<-1?"l":"";if(a){var i=a==="r"?"l":"r",o=A({},e),u=e[a];e.from=u.from,e.to=u.to,e[a]=u[a],o[a]=u[i],e[i]=o,o.d=Mr(o)}e.d=Mr(e)}function Mr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var _i={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ge(e.MIN_KEY,e.MAX_KEY);return A(A({},e),{table:function(r){var a=e.table(r),i=a.schema,o=i.primaryKey,u=o.extractKey,s=o.outbound,c=A(A({},a),{mutate:function(d){var _=d.trans,v=_.mutatedParts||(_.mutatedParts={}),h=function(D){var x="idb://"+t+"/"+r+"/"+D;return v[x]||(v[x]=new ge)},m=h(""),g=h(":dels"),w=d.type,y=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],b=y[0],p=y[1],T=d.trans._cache;return a.mutate(d).then(function(D){if($(b)){w!=="delete"&&(b=D.results),m.addKeys(b);var x=kr(b,T);!x&&w!=="add"&&g.addKeys(b),(x||p)&&Ti(h,i,x,p)}else if(b){var S={from:b.lower,to:b.upper};g.add(S),m.add(S)}else m.add(n),g.add(n),i.indexes.forEach(function(M){return h(M.name).add(n)});return D})}}),l=function(d){var _,v,h=d.query,m=h.index,g=h.range;return[m,new ge((_=g.lower)!==null&&_!==void 0?_:e.MIN_KEY,(v=g.upper)!==null&&v!==void 0?v:e.MAX_KEY)]},f={get:function(d){return[o,new ge(d.key)]},getMany:function(d){return[o,new ge().addKeys(d.keys)]},count:l,query:l,openCursor:l};return j(f).forEach(function(d){c[d]=function(_){var v=E.subscr;if(v){var h=function(T){var D="idb://"+t+"/"+r+"/"+T;return v[D]||(v[D]=new ge)},m=h(""),g=h(":dels"),w=f[d](_),y=w[0],b=w[1];if(h(y.name||"").add(b),!y.isPrimaryKey)if(d==="count")g.add(n);else{var p=d==="query"&&s&&_.values&&a.query(A(A({},_),{values:!1}));return a[d].apply(this,arguments).then(function(T){if(d==="query"){if(s&&_.values)return p.then(function(M){var I=M.result;return m.addKeys(I),T});var D=_.values?T.result.map(u):T.result;_.values?m.addKeys(D):g.addKeys(D)}else if(d==="openCursor"){var x=T,S=_.values;return x&&Object.create(x,{key:{get:function(){return g.addKey(x.primaryKey),x.key}},primaryKey:{get:function(){var M=x.primaryKey;return g.addKey(M),M}},value:{get:function(){return S&&m.addKey(x.primaryKey),x.value}}})}return T})}}return a[d].apply(this,arguments)}}),c}})}};function Ti(e,t,n,r){function a(i){var o=e(i.name||"");function u(c){return c!=null?i.extractKey(c):null}var s=function(c){return i.multiEntry&&$(c)?c.forEach(function(l){return o.addKey(l)}):o.addKey(c)};(n||r).forEach(function(c,l){var f=n&&u(n[l]),d=r&&u(r[l]);te(f,d)!==0&&(f!=null&&s(f),d!=null&&s(d))})}t.indexes.forEach(a)}var dt=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=A({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var i=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:U,dbReadyPromise:null,cancelOpen:U,openCanceller:null,autoSchema:!0};o.dbReadyPromise=new C(function(u){o.dbReadyResolve=u}),o.openCanceller=new C(function(u,s){o.cancelOpen=s}),this._state=o,this.name=t,this.on=it(this,"populate","blocked","versionchange","close",{ready:[tn,U]}),this.on.ready.subscribe=Hn(this.on.ready.subscribe,function(u){return function(s,c){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||C.resolve().then(s),c&&u(s);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(s),c&&u(s);else{u(s);var f=r;c||u(function d(){f.on.ready.unsubscribe(s),f.on.ready.unsubscribe(d)})}})}}),this.Collection=Ua(this),this.Table=Oa(this),this.Transaction=Ha(this),this.Version=oi(this),this.WhereClause=La(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=ct(n.IDBKeyRange),this._createTransaction=function(u,s,c,l){return new r.Transaction(u,s,c,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),at.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(pi),this.use(mi),this.use(_i),this.use(wi),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new k.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new k.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(a){return a._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort($a),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||E.letThrough||this._vip)?t():new C(function(r,a){if(n._state.openComplete)return a(new k.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){a(new k.DatabaseClosed);return}n.open().catch(U)}n._state.dbReadyPromise.then(r,a)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,a=t.level,i=t.name;i&&this.unuse({stack:n,name:i});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:a==null?10:a,name:i}),o.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,a=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(i){return a?i.create!==a:r?i.name!==r:!1})),this},e.prototype.open=function(){return fi(this)},e.prototype._close=function(){var t=this._state,n=at.indexOf(this);if(n>=0&&at.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new C(function(r){t.dbReadyResolve=r}),t.openCanceller=new C(function(r,a){t.cancelOpen=a})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new k.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new C(function(a,i){var o=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=N(function(){ci(t._deps,t.name),a()}),u.onerror=ce(i),u.onblocked=t._fireOnBlocked};if(n)throw new k.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return j(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=di.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var a=this,i=E.trans;(!i||i.db!==this||t.indexOf("!")!==-1)&&(i=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(l){var f=l instanceof a.Table?l.name:l;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===mn)u=mn;else if(t=="rw"||t==gn)u=gn;else throw new k.InvalidArgument("Invalid transaction mode: "+t);if(i){if(i.mode===mn&&u===gn)if(o)i=null;else throw new k.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&s.forEach(function(l){if(i&&i.storeNames.indexOf(l)===-1)if(o)i=null;else throw new k.SubTransaction("Table "+l+" not included in parent transaction.")}),o&&i&&!i.active&&(i=null)}}catch(l){return i?i._promise(null,function(f,d){d(l)}):V(l)}var c=hi.bind(null,this,u,s,i,r);return i?i._promise(u,c,"lock"):E.trans?qe(E.transless,function(){return a._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!ae(this._allTables,t))throw new k.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),xi=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Ci=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[xi]=function(){return this},e}();function Or(e,t){return j(t).forEach(function(n){var r=e[n]||(e[n]=new ge);Ft(r,t[n])}),e}function Di(e){return new Ci(function(t){var n=Jt(e);function r(_){n&&Le();var v=function(){return _e(e,{subscr:_,trans:null})},h=E.trans?qe(E.transless,v):v();return n&&h.then(ye,ye),h}var a=!1,i={},o={},u={get closed(){return a},unsubscribe:function(){a=!0,De.storagemutated.unsubscribe(f)}};t.start&&t.start(u);var s=!1,c=!1;function l(){return j(o).some(function(_){return i[_]&&bi(i[_],o[_])})}var f=function(_){Or(i,_),l()&&d()},d=function(){if(!(s||a)){i={};var _={},v=r(_);c||(De(st,f),c=!0),s=!0,Promise.resolve(v).then(function(h){s=!1,!a&&(l()?d():(i={},o=_,t.next&&t.next(h)))},function(h){s=!1,t.error&&t.error(h),u.unsubscribe()})}};return d(),u})}var Fn;try{Fn={indexedDB:B.indexedDB||B.mozIndexedDB||B.webkitIndexedDB||B.msIndexedDB,IDBKeyRange:B.IDBKeyRange||B.webkitIDBKeyRange}}catch{Fn={indexedDB:null,IDBKeyRange:null}}var Re=dt;Be(Re,A(A({},gt),{delete:function(e){var t=new Re(e,{addons:[]});return t.delete()},exists:function(e){return new Re(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return ui(Re.dependencies).then(e)}catch{return V(new k.MissingAPI)}},defineClass:function(){function e(t){ee(this,t)}return e},ignoreTransaction:function(e){return E.trans?qe(E.transless,e):e()},vip:An,async:function(e){return function(){try{var t=In(e.apply(this,arguments));return!t||typeof t.then!="function"?C.resolve(t):t}catch(n){return V(n)}}},spawn:function(e,t,n){try{var r=In(e.apply(n,t||[]));return!r||typeof r.then!="function"?C.resolve(r):r}catch(a){return V(a)}},currentTransaction:{get:function(){return E.trans||null}},waitFor:function(e,t){var n=C.resolve(typeof e=="function"?Re.ignoreTransaction(e):e).timeout(t||6e4);return E.trans?E.trans.waitFor(n):n},Promise:C,debug:{get:function(){return se},set:function(e){zn(e,e==="dexie"?function(){return!0}:yr)}},derive:Fe,extend:ee,props:Be,override:Hn,Events:it,on:De,liveQuery:Di,extendObservabilitySet:Or,getByKeyPath:ve,setByKeyPath:oe,delByKeyPath:ta,shallowClone:Xn,deepClone:ze,getObjectDiff:Rn,cmp:te,asap:jn,minKey:yn,addons:[],connections:at,errnames:ca,dependencies:Fn,semVer:vr,version:vr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),Re.maxKey=ct(Re.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(De(st,function(e){if(!we){var t;Mt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Ce,!0,!0,e)):t=new CustomEvent(Ce,{detail:e}),we=!0,dispatchEvent(t),we=!1}}),addEventListener(Ce,function(e){var t=e.detail;we||Nt(t)}));function Nt(e){var t=we;try{we=!0,De.storagemutated.fire(e)}finally{we=t}}var we=!1;if(typeof BroadcastChannel!="undefined"){var Ar=new BroadcastChannel(Ce);De(st,function(e){we||Ar.postMessage(e)}),Ar.onmessage=function(e){e.data&&Nt(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){De(st,function(e){try{we||(typeof localStorage!="undefined"&&localStorage.setItem(Ce,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Xt([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Ce,changedParts:e})}))}catch{}}),addEventListener("storage",function(e){if(e.key===Ce){var t=JSON.parse(e.newValue);t&&Nt(t.changedParts)}});var Ir=self.document&&navigator.serviceWorker;Ir&&Ir.addEventListener("message",Ei)}function Ei(e){var t=e.data;t&&t.type===Ce&&Nt(t.changedParts)}C.rejectionMapper=fa,zn(se,yr);class Si extends dt{constructor(){super("GrowDB");this.version(5).stores({varieties:"&id, brand, product",fields:"&id",weather:"&[coord+year]"}),this.varieties=this.table("varieties"),this.fields=this.table("fields"),this.weather=this.table("weather")}}const ne=new Si;class Yt{constructor(t,n,r,a,i){this.id=`v_${Qt()}`,this.type=t,this.brand=n,this.product=r,this.gduToBlack=a,this.gduToTassel=i}save(){if(!this.brand)throw"Brand is required";if(!this.product)throw"Product is required";return ne.varieties.put(this)}static default(){return new Yt("corn","","")}static get(t){return ne.varieties.get({id:t})}static async getBrands(){return ne.varieties.orderBy("brand").uniqueKeys()}static getByProduct(t){return ne.varieties.get({product:t})}static searchByProduct(t){const n=t.toLowerCase();return ne.varieties.filter(r=>r.product.toLowerCase().includes(n)).toArray()}static getAllProducts(){return ne.varieties.toArray()}}ne.varieties.mapToClass(Yt);class ki{constructor(t,n,r,a){this.id=`f_${Qt()}`,this.name=t,this.geojson=n,this.area=r,this.center=a,this.numPlants=0}save(){if(!this.name)throw"name is required";if(!this.geojson)throw"geojson is required";if(!this.area)throw"area is required";if(!this.center)throw"center is required";return ne.fields.put(this)}static async getAll(){return await ne.fields.toArray()||[]}static get(t){return ne.fields.get({id:t})}async getVariety(){return console.log(this.varietyId),this.varietyId?Yt.get(this.varietyId):void 0}}ne.fields.mapToClass(ki);class Wt{constructor(t,n,r=[],a=[],i=[]){this.id=`w_${Qt()}`,this.coord=t,this.year=n,this.maxTemp=r,this.minTemp=a,this.precipitation=i}save(){if(!this.coord)throw"coord is required";if(!this.year)throw"year is required";return ne.weather.put(this)}static async get(t,n){let r=await ne.weather.get({coord:t,year:n});return r||(r=new Wt(t,n)),r}static async getAll(t){const n=new Map;return await ne.weather.where("[coord+year]").between([t,dt.minKey],[t,dt.maxKey]).each(r=>n.set(r.year,r)),n}}ne.weather.mapToClass(Wt);function L(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Y(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function X(e){Y(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Pi(e,t){Y(2,arguments);var n=X(e).getTime(),r=L(t);return new Date(n+r)}function Lt(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Rr(e){Y(1,arguments);var t=X(e);return t.setHours(0,0,0,0),t}var Mi=864e5;function Oi(e,t){Y(2,arguments);var n=Rr(e),r=Rr(t),a=n.getTime()-Lt(n),i=r.getTime()-Lt(r);return Math.round((a-i)/Mi)}function Ai(e){return Y(1,arguments),e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ii(e){if(Y(1,arguments),!Ai(e)&&typeof e!="number")return!1;var t=X(e);return!isNaN(Number(t))}function Ri(e){Y(1,arguments);var t=X(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}var Ki={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ui=function(e,t,n){var r,a=Ki[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},Bi=Ui;function Nn(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var Fi={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ni={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Yi={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wi={date:Nn({formats:Fi,defaultWidth:"full"}),time:Nn({formats:Ni,defaultWidth:"full"}),dateTime:Nn({formats:Yi,defaultWidth:"full"})},Li=Wi,qi={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hi=function(e,t,n,r){return qi[e]},ji=Hi;function ht(e){return function(t,n){var r=n||{},a=r.context?String(r.context):"standalone",i;if(a==="formatting"&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,u=r.width?String(r.width):o;i=e.formattingValues[u]||e.formattingValues[o]}else{var s=e.defaultWidth,c=r.width?String(r.width):e.defaultWidth;i=e.values[c]||e.values[s]}var l=e.argumentCallback?e.argumentCallback(t):t;return i[l]}}var Qi={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xi={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gi={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vi={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zi={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$i={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ji=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Zi={ordinalNumber:Ji,era:ht({values:Qi,defaultWidth:"wide"}),quarter:ht({values:Xi,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ht({values:Gi,defaultWidth:"wide"}),day:ht({values:Vi,defaultWidth:"wide"}),dayPeriod:ht({values:zi,defaultWidth:"wide",formattingValues:$i,defaultFormattingWidth:"wide"})},eo=Zi;function vt(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],s=Array.isArray(u)?no(u,function(f){return f.test(o)}):to(u,function(f){return f.test(o)}),c;c=e.valueCallback?e.valueCallback(s):s,c=n.valueCallback?n.valueCallback(c):c;var l=t.slice(o.length);return{value:c,rest:l}}}function to(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function no(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function ro(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var u=t.slice(a.length);return{value:o,rest:u}}}var ao=/^(\d+)(th|st|nd|rd)?/i,io=/\d+/i,oo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uo={any:[/^b/i,/^(a|c)/i]},so={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},co={any:[/1/i,/2/i,/3/i,/4/i]},lo={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ho={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vo={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},po={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mo={ordinalNumber:ro({matchPattern:ao,parsePattern:io,valueCallback:function(e){return parseInt(e,10)}}),era:vt({matchPatterns:oo,defaultMatchWidth:"wide",parsePatterns:uo,defaultParseWidth:"any"}),quarter:vt({matchPatterns:so,defaultMatchWidth:"wide",parsePatterns:co,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:vt({matchPatterns:lo,defaultMatchWidth:"wide",parsePatterns:fo,defaultParseWidth:"any"}),day:vt({matchPatterns:ho,defaultMatchWidth:"wide",parsePatterns:vo,defaultParseWidth:"any"}),dayPeriod:vt({matchPatterns:po,defaultMatchWidth:"any",parsePatterns:yo,defaultParseWidth:"any"})},go=mo,wo={code:"en-US",formatDistance:Bi,formatLong:Li,formatRelative:ji,localize:eo,match:go,options:{weekStartsOn:0,firstWeekContainsDate:1}},Kr=wo;function Ur(e,t){Y(2,arguments);var n=L(t);return Pi(e,-n)}function K(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var bo={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return K(t==="yy"?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return t==="M"?String(n+1):K(n+1,2)},d:function(e,t){return K(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,t){return K(e.getUTCHours()%12||12,t.length)},H:function(e,t){return K(e.getUTCHours(),t.length)},m:function(e,t){return K(e.getUTCMinutes(),t.length)},s:function(e,t){return K(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds(),a=Math.floor(r*Math.pow(10,n-3));return K(a,t.length)}},Ee=bo,_o=864e5;function To(e){Y(1,arguments);var t=X(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/_o)+1}function Qe(e){Y(1,arguments);var t=1,n=X(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Br(e){Y(1,arguments);var t=X(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=Qe(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Qe(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function xo(e){Y(1,arguments);var t=Br(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Qe(n);return r}var Co=6048e5;function Fr(e){Y(1,arguments);var t=X(e),n=Qe(t).getTime()-xo(t).getTime();return Math.round(n/Co)+1}function Ke(e,t){Y(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,i=a==null?0:L(a),o=n.weekStartsOn==null?i:L(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=X(e),s=u.getUTCDay(),c=(s<o?7:0)+s-o;return u.setUTCDate(u.getUTCDate()-c),u.setUTCHours(0,0,0,0),u}function Yn(e,t){Y(1,arguments);var n=X(e),r=n.getUTCFullYear(),a=t||{},i=a.locale,o=i&&i.options&&i.options.firstWeekContainsDate,u=o==null?1:L(o),s=a.firstWeekContainsDate==null?u:L(a.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,s),c.setUTCHours(0,0,0,0);var l=Ke(c,t),f=new Date(0);f.setUTCFullYear(r,0,s),f.setUTCHours(0,0,0,0);var d=Ke(f,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Do(e,t){Y(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.firstWeekContainsDate,i=a==null?1:L(a),o=n.firstWeekContainsDate==null?i:L(n.firstWeekContainsDate),u=Yn(e,t),s=new Date(0);s.setUTCFullYear(u,0,o),s.setUTCHours(0,0,0,0);var c=Ke(s,t);return c}var Eo=6048e5;function Nr(e,t){Y(1,arguments);var n=X(e),r=Ke(n,t).getTime()-Do(n,t).getTime();return Math.round(r/Eo)+1}var Xe={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},So={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ee.y(e,t)},Y:function(e,t,n,r){var a=Yn(e,r),i=a>0?a:1-a;if(t==="YY"){var o=i%100;return K(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):K(i,t.length)},R:function(e,t){var n=Br(e);return K(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return K(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return K(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return K(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Ee.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return K(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=Nr(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):K(a,t.length)},I:function(e,t,n){var r=Fr(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):K(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ee.d(e,t)},D:function(e,t,n){var r=To(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):K(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return K(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return K(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return K(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours(),a=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r=e.getUTCHours(),a;switch(r===12?a=Xe.noon:r===0?a=Xe.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r=e.getUTCHours(),a;switch(r>=17?a=Xe.evening:r>=12?a=Xe.afternoon:r>=4?a=Xe.morning:a=Xe.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ee.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ee.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):K(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):K(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ee.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ee.s(e,t)},S:function(e,t){return Ee.S(e,t)},X:function(e,t,n,r){var a=r._originalDate||e,i=a.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return Wr(i);case"XXXX":case"XX":return Ue(i);case"XXXXX":case"XXX":default:return Ue(i,":")}},x:function(e,t,n,r){var a=r._originalDate||e,i=a.getTimezoneOffset();switch(t){case"x":return Wr(i);case"xxxx":case"xx":return Ue(i);case"xxxxx":case"xxx":default:return Ue(i,":")}},O:function(e,t,n,r){var a=r._originalDate||e,i=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Yr(i,":");case"OOOO":default:return"GMT"+Ue(i,":")}},z:function(e,t,n,r){var a=r._originalDate||e,i=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Yr(i,":");case"zzzz":default:return"GMT"+Ue(i,":")}},t:function(e,t,n,r){var a=r._originalDate||e,i=Math.floor(a.getTime()/1e3);return K(i,t.length)},T:function(e,t,n,r){var a=r._originalDate||e,i=a.getTime();return K(i,t.length)}};function Yr(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+K(i,2)}function Wr(e,t){if(e%60==0){var n=e>0?"-":"+";return n+K(Math.abs(e)/60,2)}return Ue(e,t)}function Ue(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e),i=K(Math.floor(a/60),2),o=K(a%60,2);return r+i+n+o}var ko=So;function Lr(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function qr(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function Po(e,t){var n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Lr(e,t);var i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Lr(r,t)).replace("{{time}}",qr(a,t))}var Mo={p:qr,P:Po},Hr=Mo,Oo=["D","DD"],Ao=["YY","YYYY"];function jr(e){return Oo.indexOf(e)!==-1}function Qr(e){return Ao.indexOf(e)!==-1}function qt(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Io=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ro=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ko=/^'([^]*?)'?$/,Uo=/''/g,Bo=/[a-zA-Z]/;function Fo(e,t,n){Y(2,arguments);var r=String(t),a=n||{},i=a.locale||Kr,o=i.options&&i.options.firstWeekContainsDate,u=o==null?1:L(o),s=a.firstWeekContainsDate==null?u:L(a.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,l=c==null?0:L(c),f=a.weekStartsOn==null?l:L(a.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var d=X(e);if(!Ii(d))throw new RangeError("Invalid time value");var _=Lt(d),v=Ur(d,_),h={firstWeekContainsDate:s,weekStartsOn:f,locale:i,_originalDate:d},m=r.match(Ro).map(function(g){var w=g[0];if(w==="p"||w==="P"){var y=Hr[w];return y(g,i.formatLong,h)}return g}).join("").match(Io).map(function(g){if(g==="''")return"'";var w=g[0];if(w==="'")return No(g);var y=ko[w];if(y)return!a.useAdditionalWeekYearTokens&&Qr(g)&&qt(g,t,e),!a.useAdditionalDayOfYearTokens&&jr(g)&&qt(g,t,e),y(v,g,i.localize,h);if(w.match(Bo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return g}).join("");return m}function No(e){return e.match(Ko)[1].replace(Uo,"'")}function Yo(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");t=t||{};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Wo(e){Y(1,arguments);var t=X(e),n=Oi(t,Ri(t)),r=n+1;return r}function Wn(e,t,n){Y(2,arguments);var r=n||{},a=r.locale,i=a&&a.options&&a.options.weekStartsOn,o=i==null?0:L(i),u=r.weekStartsOn==null?o:L(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=X(e),c=L(t),l=s.getUTCDay(),f=c%7,d=(f+7)%7,_=(d<u?7:0)+c-l;return s.setUTCDate(s.getUTCDate()+_),s}function Lo(e,t){Y(2,arguments);var n=L(t);n%7==0&&(n=n-7);var r=1,a=X(e),i=a.getUTCDay(),o=n%7,u=(o+7)%7,s=(u<r?7:0)+n-i;return a.setUTCDate(a.getUTCDate()+s),a}function qo(e,t){Y(2,arguments);var n=X(e),r=L(t),a=Fr(n)-r;return n.setUTCDate(n.getUTCDate()-a*7),n}function Ho(e,t,n){Y(2,arguments);var r=X(e),a=L(t),i=Nr(r,n)-a;return r.setUTCDate(r.getUTCDate()-i*7),r}var jo=36e5,Qo=6e4,Xo=1e3,H={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},le={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function W(e,t,n){var r=t.match(e);if(!r)return null;var a=parseInt(r[0],10);return{value:n?n(a):a,rest:t.slice(r[0].length)}}function fe(e,t){var n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};var r=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(a*jo+i*Qo+o*Xo),rest:t.slice(n[0].length)}}function Xr(e,t){return W(H.anyDigitsSigned,e,t)}function q(e,t,n){switch(e){case 1:return W(H.singleDigit,t,n);case 2:return W(H.twoDigits,t,n);case 3:return W(H.threeDigits,t,n);case 4:return W(H.fourDigits,t,n);default:return W(new RegExp("^\\d{1,"+e+"}"),t,n)}}function Ht(e,t,n){switch(e){case 1:return W(H.singleDigitSigned,t,n);case 2:return W(H.twoDigitsSigned,t,n);case 3:return W(H.threeDigitsSigned,t,n);case 4:return W(H.fourDigitsSigned,t,n);default:return W(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function Ln(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Gr(e,t){var n=t>0,r=n?t:1-t,a;if(r<=50)a=e||100;else{var i=r+50,o=Math.floor(i/100)*100,u=e>=i%100;a=e+o-(u?100:0)}return n?a:1-a}var Go=[31,28,31,30,31,30,31,31,30,31,30,31],Vo=[31,29,31,30,31,30,31,31,30,31,30,31];function Vr(e){return e%400==0||e%4==0&&e%100!=0}var zo={G:{priority:140,parse:function(e,t,n,r){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,r){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,r){var a=function(i){return{year:i,isTwoDigitYear:t==="yy"}};switch(t){case"y":return q(4,e,a);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:a});default:return q(t.length,e,a)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var a=e.getUTCFullYear();if(n.isTwoDigitYear){var i=Gr(n.year,a);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o=!("era"in t)||t.era===1?n.year:1-n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,r){var a=function(i){return{year:i,isTwoDigitYear:t==="YY"}};switch(t){case"Y":return q(4,e,a);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:a});default:return q(t.length,e,a)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var a=Yn(e,r);if(n.isTwoDigitYear){var i=Gr(n.year,a);return e.setUTCFullYear(i,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Ke(e,r)}var o=!("era"in t)||t.era===1?n.year:1-n.year;return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Ke(e,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,r){return Ht(t==="R"?4:t.length,e)},set:function(e,t,n,r){var a=new Date(0);return a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0),Qe(a)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,r){return Ht(t==="u"?4:t.length,e)},set:function(e,t,n,r){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,r){switch(t){case"Q":case"QQ":return q(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,r){switch(t){case"q":case"qq":return q(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,r){var a=function(i){return i-1};switch(t){case"M":return W(H.month,e,a);case"MM":return q(2,e,a);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:a});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,r){var a=function(i){return i-1};switch(t){case"L":return W(H.month,e,a);case"LL":return q(2,e,a);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:a});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,r){switch(t){case"w":return W(H.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return Ke(Ho(e,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,r){switch(t){case"I":return W(H.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return Qe(qo(e,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"d":return W(H.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return q(t.length,e)}},validate:function(e,t,n){var r=e.getUTCFullYear(),a=Vr(r),i=e.getUTCMonth();return a?t>=1&&t<=Vo[i]:t>=1&&t<=Go[i]},set:function(e,t,n,r){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"D":case"DD":return W(H.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return q(t.length,e)}},validate:function(e,t,n){var r=e.getUTCFullYear(),a=Vr(r);return a?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,r){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,r){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return e=Wn(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,r){var a=function(i){var o=Math.floor((i-1)/7)*7;return(i+r.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return q(t.length,e,a);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:a});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return e=Wn(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,r){var a=function(i){var o=Math.floor((i-1)/7)*7;return(i+r.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return q(t.length,e,a);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:a});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return e=Wn(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,r){var a=function(i){return i===0?7:i};switch(t){case"i":case"ii":return q(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:a})||n.day(e,{width:"short",context:"formatting",valueCallback:a})||n.day(e,{width:"narrow",context:"formatting",valueCallback:a});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:a});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:a})||n.day(e,{width:"narrow",context:"formatting",valueCallback:a});case"iiii":default:return n.day(e,{width:"wide",context:"formatting",valueCallback:a})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:a})||n.day(e,{width:"short",context:"formatting",valueCallback:a})||n.day(e,{width:"narrow",context:"formatting",valueCallback:a})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,r){return e=Lo(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,r){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(Ln(n),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,n,r){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(Ln(n),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,n,r){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(Ln(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,r){switch(t){case"h":return W(H.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,r){var a=e.getUTCHours()>=12;return a&&n<12?e.setUTCHours(n+12,0,0,0):!a&&n===12?e.setUTCHours(0,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,r){switch(t){case"H":return W(H.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,r){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,r){switch(t){case"K":return W(H.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){var a=e.getUTCHours()>=12;return a&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,r){switch(t){case"k":return W(H.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,r){var a=n<=24?n%24:n;return e.setUTCHours(a,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,r){switch(t){case"m":return W(H.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,r){switch(t){case"s":return W(H.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,r){var a=function(i){return Math.floor(i*Math.pow(10,-t.length+3))};return q(t.length,e,a)},set:function(e,t,n,r){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,r){switch(t){case"X":return fe(le.basicOptionalMinutes,e);case"XX":return fe(le.basic,e);case"XXXX":return fe(le.basicOptionalSeconds,e);case"XXXXX":return fe(le.extendedOptionalSeconds,e);case"XXX":default:return fe(le.extended,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,r){switch(t){case"x":return fe(le.basicOptionalMinutes,e);case"xx":return fe(le.basic,e);case"xxxx":return fe(le.basicOptionalSeconds,e);case"xxxxx":return fe(le.extendedOptionalSeconds,e);case"xxx":default:return fe(le.extended,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,r){return Xr(e)},set:function(e,t,n,r){return[new Date(n*1e3),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,r){return Xr(e)},set:function(e,t,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},$o=zo,Jo=10,Zo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tu=/^'([^]*?)'?$/,nu=/''/g,ru=/\S/,au=/[a-zA-Z]/;function iu(e,t,n,r){Y(3,arguments);var a=String(e),i=String(t),o=r||{},u=o.locale||Kr;if(!u.match)throw new RangeError("locale must contain match property");var s=u.options&&u.options.firstWeekContainsDate,c=s==null?1:L(s),l=o.firstWeekContainsDate==null?c:L(o.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=u.options&&u.options.weekStartsOn,d=f==null?0:L(f),_=o.weekStartsOn==null?d:L(o.weekStartsOn);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(i==="")return a===""?X(n):new Date(NaN);var v={firstWeekContainsDate:l,weekStartsOn:_,locale:u},h=[{priority:Jo,subPriority:-1,set:ou,index:0}],m,g=i.match(eu).map(function(F){var Q=F[0];if(Q==="p"||Q==="P"){var Z=Hr[Q];return Z(F,u.formatLong,v)}return F}).join("").match(Zo),w=[];for(m=0;m<g.length;m++){var y=g[m];!o.useAdditionalWeekYearTokens&&Qr(y)&&qt(y,i,e),!o.useAdditionalDayOfYearTokens&&jr(y)&&qt(y,i,e);var b=y[0],p=$o[b];if(p){var T=p.incompatibleTokens;if(Array.isArray(T)){for(var D=void 0,x=0;x<w.length;x++){var S=w[x].token;if(T.indexOf(S)!==-1||S===b){D=w[x];break}}if(D)throw new RangeError("The format string mustn't contain `".concat(D.fullToken,"` and `").concat(y,"` at the same time"))}else if(p.incompatibleTokens==="*"&&w.length)throw new RangeError("The format string mustn't contain `".concat(y,"` and any other token at the same time"));w.push({token:b,fullToken:y});var M=p.parse(a,y,u.match,v);if(!M)return new Date(NaN);h.push({priority:p.priority,subPriority:p.subPriority||0,set:p.set,validate:p.validate,value:M.value,index:h.length}),a=M.rest}else{if(b.match(au))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(y==="''"?y="'":b==="'"&&(y=uu(y)),a.indexOf(y)===0)a=a.slice(y.length);else return new Date(NaN)}}if(a.length>0&&ru.test(a))return new Date(NaN);var I=h.map(function(F){return F.priority}).sort(function(F,Q){return Q-F}).filter(function(F,Q,Z){return Z.indexOf(F)===Q}).map(function(F){return h.filter(function(Q){return Q.priority===F}).sort(function(Q,Z){return Z.subPriority-Q.subPriority})}).map(function(F){return F[0]}),R=X(n);if(isNaN(R))return new Date(NaN);var O=Ur(R,Lt(R)),G={};for(m=0;m<I.length;m++){var P=I[m];if(P.validate&&!P.validate(O,P.value,v))return new Date(NaN);var z=P.set(O,G,P.value,v);z[0]?(O=z[0],Yo(G,z[1])):O=z}return O}function ou(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}function uu(e){return e.match(tu)[1].replace(nu,"'")}onmessage=async function(e){const t=e.data,n=new Date;for(const r of t.years){const a=await Wt.get(t.coord,r);if(a.maxTemp.length&&a.year!==n.getFullYear()){console.info(`Already have ${r} weather for (${t.coord[0]}, ${t.coord[1]})`);continue}(await fetch("https://data.rcc-acis.org/GridData",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({sdate:`${r}-01-01`,edate:r==n.getFullYear()?Fo(n,"yyyy-MM-dd"):`${r}-12-31`,grid:"21",loc:`${t.coord[0]}, ${t.coord[1]}`,elems:[{name:"maxt",units:"degreeF"},{name:"mint",units:"degreeF"},{name:"pcpn",units:"inch"}]})}).then(o=>o.json()).then(o=>o.data)).forEach(([o,u,s,c])=>{const l=Wo(iu(o,"yyyy-MM-dd",new Date))-1;a.maxTemp[l]=u,a.minTemp[l]=s,a.precipitation[l]=c}),await a.save()}}})();
